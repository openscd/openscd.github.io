{"version":3,"file":"substation-editor.js","sourceRoot":"","sources":["../../../src/zeroline/substation-editor.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  css,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from 'lit-element';\nimport { translate } from 'lit-translate';\nimport { newActionEvent, newWizardEvent } from '../foundation.js';\nimport { wizards } from '../wizards/wizard-library.js';\n\nimport {\n  cloneSubstationElement,\n  selectors,\n  startMove,\n  styles,\n} from './foundation.js';\n\nimport './voltage-level-editor.js';\n\n/** [[`Substation`]] plugin subeditor for editing `Substation` sections. */\n@customElement('substation-editor')\nexport class SubstationEditor extends LitElement {\n  /** The edited `Element`, a common property of all Substation subeditors. */\n  @property({ attribute: false })\n  element!: Element;\n  @property({ type: Boolean })\n  readonly = false;\n\n  /** [[element | `element.name`]] */\n  @property({ type: String })\n  get name(): string {\n    return this.element.getAttribute('name') ?? '';\n  }\n  /** [[element | `element.desc`]] */\n  @property({ type: String })\n  get desc(): string | null {\n    return this.element.getAttribute('desc');\n  }\n\n  @property({ attribute: false })\n  getAttachedIeds?: (element: Element) => Element[] = () => {\n    return [];\n  };\n\n  /** Opens a [[`WizardDialog`]] for editing [[`element`]]. */\n  openEditWizard(): void {\n    const wizard = wizards['Substation'].edit(this.element);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  /** Opens a [[`WizardDialog`]] for adding a new `VoltageLevel`. */\n  openVoltageLevelWizard(): void {\n    const wizard = wizards['VoltageLevel'].create(this.element);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  /** Opens a [[`WizardDialog`]] for editing `LNode` connections. */\n  openLNodeWizard(): void {\n    const wizard = wizards['LNode'].edit(this.element);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  /** Deletes [[`element`]]. */\n  remove(): void {\n    this.dispatchEvent(\n      newActionEvent({\n        old: {\n          parent: this.element.parentElement!,\n          element: this.element,\n          reference: this.element.nextSibling,\n        },\n      })\n    );\n  }\n\n  renderIedContainer(): TemplateResult {\n    const ieds = this.getAttachedIeds?.(this.element) ?? [];\n    return ieds?.length\n      ? html`<div id=\"iedcontainer\">\n          ${ieds.map(ied => html`<ied-editor .element=${ied}></ied-editor>`)}\n        </div>`\n      : html``;\n  }\n\n  renderHeader(): TemplateResult {\n    return html`\n        <h1>\n          ${this.name} ${this.desc === null ? '' : html`&mdash;`} ${this.desc}\n          ${\n            this.readonly\n              ? html``\n              : html`<abbr title=\"${translate('add')}\">\n                    <mwc-icon-button\n                      icon=\"playlist_add\"\n                      @click=${() => this.openVoltageLevelWizard()}\n                    ></mwc-icon-button>\n                  </abbr>\n                  <nav>\n                    <abbr title=\"${translate('lnode.tooltip')}\">\n                      <mwc-icon-button\n                        icon=\"account_tree\"\n                        @click=${() => this.openLNodeWizard()}\n                      ></mwc-icon-button>\n                    </abbr>\n                    <abbr title=\"${translate('duplicate')}\">\n                      <mwc-icon-button\n                        icon=\"content_copy\"\n                        @click=${() => cloneSubstationElement(this)}\n                      ></mwc-icon-button>\n                    </abbr>\n                    <abbr title=\"${translate('edit')}\">\n                      <mwc-icon-button\n                        icon=\"edit\"\n                        @click=${() => this.openEditWizard()}\n                      ></mwc-icon-button>\n                    </abbr>\n                    <abbr title=\"${translate('move')}\">\n                      <mwc-icon-button\n                        icon=\"forward\"\n                        @click=${() =>\n                          startMove(this, SubstationEditor, SubstationEditor)}\n                      ></mwc-icon-button>\n                    </abbr>\n                    <abbr title=\"${translate('remove')}\">\n                      <mwc-icon-button\n                        icon=\"delete\"\n                        @click=${() => this.remove()}\n                      ></mwc-icon-button>\n                    </abbr>\n                  </nav>`\n          }\n          </nav>\n        </h1>\n      `;\n  }\n\n  render(): TemplateResult {\n    return html`\n      <section tabindex=\"0\">\n        ${this.renderHeader()} ${this.renderIedContainer()}\n        ${Array.from(this.element.querySelectorAll(selectors.VoltageLevel)).map(\n          voltageLevel =>\n            html`<voltage-level-editor\n              .element=${voltageLevel}\n              .getAttachedIeds=${this.getAttachedIeds}\n              ?readonly=${this.readonly}\n            ></voltage-level-editor>`\n        )}\n      </section>\n    `;\n  }\n\n  static styles = css`\n    ${styles}\n\n    section {\n      overflow: hidden;\n    }\n\n    :host {\n      width: 100vw;\n    }\n  `;\n}\n"]}