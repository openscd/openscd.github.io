{"version":3,"file":"bay-editor.js","sourceRoot":"","sources":["../../../src/zeroline/bay-editor.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  css,\n  customElement,\n  html,\n  LitElement,\n  property,\n  TemplateResult,\n} from 'lit-element';\nimport { translate } from 'lit-translate';\n\nimport { startMove, styles, cloneSubstationElement } from './foundation.js';\nimport { newActionEvent, newWizardEvent } from '../foundation.js';\n\nimport { wizards } from '../wizards/wizard-library.js';\n\nimport { VoltageLevelEditor } from './voltage-level-editor.js';\nimport './conducting-equipment-editor.js';\n\n/** [[`SubstationEditor`]] subeditor for a `Bay` element. */\n@customElement('bay-editor')\nexport class BayEditor extends LitElement {\n  @property({ attribute: false })\n  element!: Element;\n  @property({ type: Boolean })\n  readonly = false;\n\n  @property({ type: String })\n  get name(): string {\n    return this.element.getAttribute('name') ?? '';\n  }\n  @property({ type: String })\n  get desc(): string | null {\n    return this.element.getAttribute('desc') ?? null;\n  }\n\n  @property({ attribute: false })\n  getAttachedIeds?: (element: Element) => Element[] = () => {\n    return [];\n  };\n\n  openEditWizard(): void {\n    const wizard = wizards['Bay'].edit(this.element);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  openConductingEquipmentWizard(): void {\n    const wizard = wizards['ConductingEquipment'].create(this.element);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  /** Opens a [[`WizardDialog`]] for editing `LNode` connections. */\n  openLNodeWizard(): void {\n    const wizard = wizards['LNode'].edit(this.element);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  remove(): void {\n    if (this.element)\n      this.dispatchEvent(\n        newActionEvent({\n          old: {\n            parent: this.element.parentElement!,\n            element: this.element,\n            reference: this.element.nextSibling,\n          },\n        })\n      );\n  }\n\n  renderIedContainer(): TemplateResult {\n    const ieds = this.getAttachedIeds?.(this.element) ?? [];\n    return ieds?.length\n      ? html`<div id=\"iedcontainer\">\n          ${ieds.map(ied => html`<ied-editor .element=${ied}></ied-editor>`)}\n        </div>`\n      : html``;\n  }\n\n  renderHeader(): TemplateResult {\n    return html`<h3>\n      ${this.name} ${this.desc === null ? '' : html`&mdash;`} ${this.desc}\n      ${this.readonly\n        ? html``\n        : html`<abbr title=\"${translate('add')}\">\n              <mwc-icon-button\n                icon=\"playlist_add\"\n                @click=${() => this.openConductingEquipmentWizard()}\n              ></mwc-icon-button>\n            </abbr>\n            <nav>\n              <abbr title=\"${translate('lnode.tooltip')}\">\n                <mwc-icon-button\n                  icon=\"account_tree\"\n                  @click=\"${() => this.openLNodeWizard()}\"\n                ></mwc-icon-button>\n              </abbr>\n              <abbr title=\"${translate('duplicate')}\">\n                <mwc-icon-button\n                  icon=\"content_copy\"\n                  @click=${() => cloneSubstationElement(this)}\n                ></mwc-icon-button>\n              </abbr>\n              <abbr title=\"${translate('edit')}\">\n                <mwc-icon-button\n                  icon=\"edit\"\n                  @click=${() => this.openEditWizard()}\n                ></mwc-icon-button>\n              </abbr>\n              <abbr title=\"${translate('move')}\">\n                <mwc-icon-button\n                  icon=\"forward\"\n                  @click=${() => startMove(this, BayEditor, VoltageLevelEditor)}\n                ></mwc-icon-button>\n              </abbr>\n              <abbr title=\"${translate('remove')}\">\n                <mwc-icon-button\n                  icon=\"delete\"\n                  @click=${() => this.remove()}\n                ></mwc-icon-button>\n              </abbr>\n            </nav>`}\n    </h3>`;\n  }\n\n  render(): TemplateResult {\n    return html`<section tabindex=\"0\">\n      ${this.renderHeader()}\n      <div>\n        ${this.renderIedContainer()}\n        <div id=\"ceContainer\">\n          ${Array.from(\n            this.element?.querySelectorAll(\n              ':root > Substation > VoltageLevel > Bay > ConductingEquipment'\n            ) ?? []\n          ).map(\n            voltageLevel =>\n              html`<conducting-equipment-editor\n                .element=${voltageLevel}\n                ?readonly=${this.readonly}\n              ></conducting-equipment-editor>`\n          )}\n        </div>\n      </div>\n    </section> `;\n  }\n\n  static styles = css`\n    ${styles}\n\n    section {\n      margin: 0px;\n    }\n\n    #ceContainer {\n      display: grid;\n      grid-gap: 12px;\n      padding: 12px;\n      box-sizing: border-box;\n      grid-template-columns: repeat(auto-fit, minmax(64px, auto));\n    }\n  `;\n}\n"]}