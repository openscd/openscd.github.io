{"version":3,"file":"voltage-level-editor.js","sourceRoot":"","sources":["../../../src/zeroline/voltage-level-editor.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  LitElement,\n  TemplateResult,\n  customElement,\n  html,\n  property,\n  css,\n} from 'lit-element';\nimport { translate } from 'lit-translate';\n\nimport {\n  selectors,\n  startMove,\n  cloneSubstationElement,\n  styles,\n} from './foundation.js';\nimport { newActionEvent, newWizardEvent } from '../foundation.js';\n\nimport { SubstationEditor } from './substation-editor.js';\nimport { wizards } from '../wizards/wizard-library.js';\n\nimport './bay-editor.js';\n\n/** [[`Substation`]] subeditor for a `VoltageLevel` element. */\n@customElement('voltage-level-editor')\nexport class VoltageLevelEditor extends LitElement {\n  @property()\n  element!: Element;\n  @property({ type: Boolean })\n  readonly = false;\n\n  @property()\n  get voltage(): string | null {\n    const V = this.element.querySelector(selectors.VoltageLevel + ' > Voltage');\n    if (V === null) return null;\n    const v = V.textContent ?? '';\n    const m = V.getAttribute('multiplier');\n    const u = m === null ? 'V' : ' ' + m + 'V';\n    return v ? v + u : null;\n  }\n  @property({ type: String })\n  get header(): string {\n    const name = this.element.getAttribute('name') ?? '';\n    const desc = this.element.getAttribute('desc');\n\n    return `${name} ${desc === null ? '' : '-'} ${desc}\n    ${this.voltage === null ? '' : `(${this.voltage})`}`;\n  }\n\n  @property({ attribute: false })\n  getAttachedIeds?: (element: Element) => Element[] = () => {\n    return [];\n  };\n\n  openEditWizard(): void {\n    const wizard = wizards['VoltageLevel'].edit(this.element);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  /** Opens a [[`WizardDialog`]] for editing `LNode` connections. */\n  openLNodeWizard(): void {\n    const wizard = wizards['LNode'].edit(this.element);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  remove(): void {\n    if (this.element)\n      this.dispatchEvent(\n        newActionEvent({\n          old: {\n            parent: this.element.parentElement!,\n            element: this.element,\n            reference: this.element.nextSibling,\n          },\n        })\n      );\n  }\n\n  renderIedContainer(): TemplateResult {\n    const ieds = this.getAttachedIeds?.(this.element) ?? [];\n    return ieds?.length\n      ? html`<div id=\"iedcontainer\" slot=\"container\">\n          ${ieds.map(ied => html`<ied-editor .element=${ied}></ied-editor>`)}\n        </div>`\n      : html``;\n  }\n\n  render(): TemplateResult {\n    return html`<editor-container\n      .element=${this.element}\n      header=\"${this.header}\"\n    >\n      <abbr slot=\"header\" title=\"${translate('lnode.tooltip')}\">\n        <mwc-icon-button\n          icon=\"account_tree\"\n          @click=${() => this.openLNodeWizard()}\n        ></mwc-icon-button>\n      </abbr>\n      <abbr slot=\"header\" title=\"${translate('duplicate')}\">\n        <mwc-icon-button\n          icon=\"content_copy\"\n          @click=${() => cloneSubstationElement(this)}\n        ></mwc-icon-button>\n      </abbr>\n      <abbr slot=\"header\" title=\"${translate('edit')}\">\n        <mwc-icon-button\n          icon=\"edit\"\n          @click=${() => this.openEditWizard()}\n        ></mwc-icon-button>\n      </abbr>\n      <abbr slot=\"header\" title=\"${translate('move')}\">\n        <mwc-icon-button\n          icon=\"forward\"\n          @click=${() => startMove(this, VoltageLevelEditor, SubstationEditor)}\n        ></mwc-icon-button>\n      </abbr>\n      <abbr slot=\"header\" title=\"${translate('remove')}\">\n        <mwc-icon-button\n          icon=\"delete\"\n          @click=${() => this.remove()}\n        ></mwc-icon-button>\n      </abbr>\n      ${this.renderIedContainer()}\n      <div id=\"bayContainer\" slot=\"container\">\n        ${Array.from(this.element?.querySelectorAll(selectors.Bay) ?? []).map(\n          bay => html`<bay-editor\n            .element=${bay}\n            .getAttachedIeds=${this.getAttachedIeds}\n            ?readonly=${this.readonly}\n          ></bay-editor>`\n        )}\n      </div>\n    </editor-container>`;\n  }\n\n  static styles = css`\n    ${styles}\n\n    #bayContainer {\n      display: grid;\n      grid-gap: 12px;\n      padding: 8px 12px 16px;\n      box-sizing: border-box;\n      grid-template-columns: repeat(auto-fit, minmax(316px, auto));\n    }\n\n    @media (max-width: 387px) {\n      #bayContainer {\n        grid-template-columns: repeat(auto-fit, minmax(196px, auto));\n      }\n    }\n  `;\n}\n"]}