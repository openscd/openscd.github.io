{"version":3,"file":"substation.js","sourceRoot":"","sources":["../../../src/wizards/substation.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, TemplateResult } from 'lit-element';\nimport { get, translate } from 'lit-translate';\n\nimport {\n  createElement,\n  EditorAction,\n  getValue,\n  newWizardEvent,\n  Wizard,\n  WizardActor,\n  WizardInput,\n} from '../foundation.js';\nimport { updateNamingAction } from './foundation/actions.js';\n\nimport { guessVoltageLevel } from '../editors/substation/guess-wizard.js';\n\nfunction render(\n  name: string,\n  desc: string | null,\n  guessable: boolean\n): TemplateResult[] {\n  return [\n    html`<wizard-textfield\n      label=\"name\"\n      .maybeValue=${name}\n      helper=\"${translate('substation.wizard.nameHelper')}\"\n      required\n      validationMessage=\"${translate('textfield.required')}\"\n      dialogInitialFocus\n    ></wizard-textfield>`,\n    html`<wizard-textfield\n      label=\"desc\"\n      .maybeValue=${desc}\n      nullable\n      helper=\"${translate('substation.wizard.descHelper')}\"\n    ></wizard-textfield>`,\n    guessable\n      ? html`<mwc-formfield label=\"${translate('guess.wizard.primary')}\">\n          <mwc-checkbox></mwc-checkbox>\n        </mwc-formfield>`\n      : html``,\n  ];\n}\n\nexport function createAction(parent: Element): WizardActor {\n  return (inputs: WizardInput[], wizard: Element): EditorAction[] => {\n    const name = getValue(inputs.find(i => i.label === 'name')!);\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const guess = wizard.shadowRoot?.querySelector('mwc-checkbox')?.checked;\n    parent.ownerDocument.createElement('Substation');\n    const element = createElement(parent.ownerDocument, 'Substation', {\n      name,\n      desc,\n    });\n\n    const action = {\n      new: {\n        parent,\n        element,\n      },\n    };\n\n    if (guess)\n      wizard.dispatchEvent(\n        newWizardEvent(guessVoltageLevel(parent.ownerDocument))\n      );\n\n    return [action];\n  };\n}\n\nexport function createSubstationWizard(parent: Element): Wizard {\n  const guessable = parent.querySelector('Substation') === null;\n\n  return [\n    {\n      title: get('substation.wizard.title.add'),\n      element: undefined,\n      primary: {\n        icon: 'add',\n        label: get('add'),\n        action: createAction(parent),\n      },\n      content: render('', '', guessable),\n    },\n  ];\n}\n\nexport function substationEditWizard(element: Element): Wizard {\n  return [\n    {\n      title: get('substation.wizard.title.edit'),\n      element,\n      primary: {\n        icon: 'edit',\n        label: get('save'),\n        action: updateNamingAction(element),\n      },\n      content: render(\n        element.getAttribute('name') ?? '',\n        element.getAttribute('desc'),\n        false\n      ),\n    },\n  ];\n}\n"]}