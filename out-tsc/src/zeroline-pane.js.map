{"version":3,"file":"zeroline-pane.js","sourceRoot":"","sources":["../../src/zeroline-pane.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  LitElement,\n  html,\n  TemplateResult,\n  property,\n  customElement,\n  css,\n  query,\n} from 'lit-element';\nimport { translate } from 'lit-translate';\n\nimport { isPublic, newWizardEvent } from './foundation.js';\nimport { getAttachedIeds } from './zeroline/foundation.js';\n\nimport './zeroline/substation-editor.js';\nimport './zeroline/ied-editor.js';\nimport { Settings } from './Setting.js';\nimport { wizards } from './wizards/wizard-library.js';\nimport { communicationMappingWizard } from './wizards/commmap-wizards.js';\nimport { IconButton } from '@material/mwc-icon-button';\nimport { IconButtonToggle } from '@material/mwc-icon-button-toggle';\nimport { selectGseControlWizard } from './wizards/gsecontrol.js';\nimport { gooseIcon } from './icons.js';\n\nfunction shouldShowIEDs(): boolean {\n  return localStorage.getItem('showieds') === 'on';\n}\n\nfunction setShowIEDs(value: Settings['showieds']) {\n  localStorage.setItem('showieds', value);\n}\n\n/** [[`Zeroline`]] pane for displaying `Substation` and/or `IED` sections. */\n@customElement('zeroline-pane')\nexport class ZerolinePane extends LitElement {\n  /** The document being edited as provided to editor by [[`Zeroline`]]. */\n  @property({ attribute: false })\n  doc!: XMLDocument;\n  @property({ type: Boolean })\n  readonly = false;\n\n  @property({ attribute: false })\n  getAttachedIeds?: (element: Element) => Element[] = () => [];\n\n  @query('#commmap') commmap!: IconButton;\n  @query('#showieds') showieds!: IconButtonToggle;\n  @query('#gsecontrol') gsecontrol!: IconButton;\n  @query('#createsubstation') createsubstation!: IconButton;\n\n  openCommunicationMapping(): void {\n    const wizard = communicationMappingWizard(this.doc);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  /** Opens a [[`WizardDialog`]] for creating a new `Substation` element. */\n  openCreateSubstationWizard(): void {\n    const wizard = wizards['Substation'].create(this.doc.documentElement);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  openGseControlSelection(): void {\n    const wizard = selectGseControlWizard(this.doc.documentElement);\n    if (wizard) this.dispatchEvent(newWizardEvent(wizard));\n  }\n\n  toggleShowIEDs(): void {\n    if (shouldShowIEDs()) setShowIEDs('off');\n    else setShowIEDs('on');\n    this.requestUpdate();\n  }\n\n  renderIedContainer(): TemplateResult {\n    this.getAttachedIeds = shouldShowIEDs()\n      ? getAttachedIeds(this.doc)\n      : () => [];\n    const ieds = this.getAttachedIeds?.(this.doc.documentElement) ?? [];\n\n    return ieds.length\n      ? html`<div id=\"iedcontainer\">\n          ${ieds.map(ied => html`<ied-editor .element=${ied}></ied-editor>`)}\n        </div>`\n      : html``;\n  }\n\n  render(): TemplateResult {\n    return html` <h1>\n        <nav>\n          <abbr title=\"${translate('add')}\">\n            <mwc-icon-button\n              id=\"createsubstation\"\n              icon=\"playlist_add\"\n              @click=${() => this.openCreateSubstationWizard()}\n            ></mwc-icon-button>\n          </abbr>\n        </nav>\n        <nav>\n          <abbr title=\"${translate('zeroline.commmap')}\">\n            <mwc-icon-button-toggle\n              ?on=${shouldShowIEDs()}\n              @click=${() => this.toggleShowIEDs()}\n              id=\"showieds\"\n              onIcon=\"developer_board\"\n              offIcon=\"developer_board_off\"\n            ></mwc-icon-button-toggle>\n          </abbr>\n          <abbr title=\"${translate('zeroline.commmap')}\">\n            <mwc-icon-button\n              id=\"commmap\"\n              icon=\"link\"\n              @click=${() => this.openCommunicationMapping()}\n            ></mwc-icon-button>\n          </abbr>\n          <abbr title=\"${translate('zeroline.gsecontrol')}\"\n            ><mwc-icon-button\n              id=\"gsecontrol\"\n              @click=\"${() => this.openGseControlSelection()}\"\n              >${gooseIcon}</mwc-icon-button\n            ></abbr\n          >\n        </nav>\n      </h1>\n      ${this.renderIedContainer()}\n      ${this.doc?.querySelector(':root > Substation')\n        ? html`<section>\n            ${Array.from(this.doc.querySelectorAll('Substation') ?? [])\n              .filter(isPublic)\n              .map(\n                substation =>\n                  html`<substation-editor\n                    .element=${substation}\n                    .getAttachedIeds=${this.getAttachedIeds}\n                    ?readonly=${this.readonly}\n                  ></substation-editor>`\n              )}\n          </section>`\n        : html`<h1>\n            <span style=\"color: var(--base1)\"\n              >${translate('substation.missing')}</span\n            >\n          </h1>`}`;\n  }\n\n  static styles = css`\n    h1 {\n      color: var(--mdc-theme-on-surface);\n      font-family: 'Roboto', sans-serif;\n      font-weight: 300;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      margin: 0px;\n      line-height: 48px;\n      padding-left: 0.3em;\n      transition: background-color 150ms linear;\n    }\n\n    h1 > nav,\n    h1 > abbr > mwc-icon-button {\n      float: right;\n    }\n\n    section {\n      padding: 8px 12px 16px;\n    }\n\n    abbr {\n      text-decoration: none;\n      border-bottom: none;\n    }\n\n    #iedcontainer {\n      display: grid;\n      grid-gap: 12px;\n      padding: 8px 12px 16px;\n      box-sizing: border-box;\n      grid-template-columns: repeat(auto-fit, minmax(64px, auto));\n    }\n  `;\n}\n"]}