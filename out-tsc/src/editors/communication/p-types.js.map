{"version":3,"file":"p-types.js","sourceRoot":"","sources":["../../../../src/editors/communication/p-types.ts"],"names":[],"mappings":"AAAA,uFAAuF;AACvF,6FAA6F;AAC7F,+FAA+F;AAC/F,oGAAoG;AACpG,wBAAwB;AACxB,MAAM,UAAU,QAAQ,CAAC,OAAgB;IACvC,IAAI,CAAC,OAAO,CAAC,aAAa;QAAE,OAAO,EAAE,CAAC;IAEtC,MAAM,GAAG,GAAY,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC,OAAO,CAAE,CAAC;IAEnE,MAAM,IAAI,GACR,CAAC,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,MAAM,CAAC;QACvC,CAAC,GAAG,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;QACpC,CAAC,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC;IAEtC,IAAI,IAAI,KAAK,MAAM;QAAE,OAAO,UAAU,CAAC;IAEvC,IAAI,IAAI,KAAK,OAAO;QAAE,OAAO,WAAW,CAAC;IAEzC,OAAO,YAAY,CAAC;AACtB,CAAC;AAED,MAAM,UAAU,GAAa;IAC3B,IAAI;IACJ,WAAW;IACX,YAAY;IACZ,UAAU;IACV,UAAU;IACV,UAAU;IACV,cAAc;IACd,eAAe;IACf,kBAAkB;IAClB,eAAe;IACf,UAAU;IACV,SAAS;IACT,eAAe;CAChB,CAAC;AAEF,MAAM,WAAW,GAAa;IAC5B,GAAG,UAAU;IACb,WAAW;IACX,UAAU;IACV,SAAS;IACT,UAAU;IACV,UAAU;IACV,iBAAiB;CAClB,CAAC;AAEF,MAAM,YAAY,GAAa;IAC7B,GAAG,WAAW;IACd,MAAM;IACN,aAAa;IACb,cAAc;IACd,eAAe;IACf,oBAAoB;IACpB,gBAAgB;IAChB,aAAa;IACb,mBAAmB;CACpB,CAAC;AAEF,MAAM,YAAY,GAAa;IAC7B,aAAa;IACb,OAAO;IACP,SAAS;IACT,eAAe;CAChB,CAAC;AAEF,MAAM,CAAC,MAAM,YAAY,GAAqC;IAC5D,EAAE,EAAE,KAAK;IACT,WAAW,EAAE,KAAK;IAClB,YAAY,EAAE,KAAK;IACnB,UAAU,EAAE,KAAK;IACjB,UAAU,EAAE,KAAK;IACjB,UAAU,EAAE,KAAK;IACjB,cAAc,EAAE,IAAI;IACpB,eAAe,EAAE,IAAI;IACrB,kBAAkB,EAAE,IAAI;IACxB,eAAe,EAAE,IAAI;IACrB,UAAU,EAAE,IAAI;IAChB,aAAa,EAAE,KAAK;IACpB,KAAK,EAAE,KAAK;IACZ,SAAS,EAAE,IAAI;IACf,eAAe,EAAE,IAAI;IACrB,WAAW,EAAE,IAAI;IACjB,UAAU,EAAE,IAAI;IAChB,OAAO,EAAE,IAAI;IACb,UAAU,EAAE,IAAI;IAChB,UAAU,EAAE,IAAI;IAChB,iBAAiB,EAAE,IAAI;IACvB,IAAI,EAAE,IAAI;IACV,aAAa,EAAE,IAAI;IACnB,cAAc,EAAE,IAAI;IACpB,aAAa,EAAE,IAAI;IACnB,kBAAkB,EAAE,IAAI;IACxB,gBAAgB,EAAE,IAAI;IACtB,aAAa,EAAE,IAAI;IACnB,mBAAmB,EAAE,IAAI;CAC1B,CAAC;AAEF,MAAM,QAAQ,GAAG;IACf,EAAE,EACA,mLAAmL;IACrL,GAAG,EAAE,WAAW;IAChB,IAAI,EAAE,QAAQ;IACd,MAAM,EAAE,cAAc;IACtB,GAAG,EACD,sFAAsF;IACxF,KAAK,EAAE,aAAa;IACpB,KAAK,EAAE,OAAO;IACd,MAAM,EAAE,aAAa;IACrB,IAAI,EACF,0GAA0G;IAC5G,IAAI,EAAE,kCAAkC;IACxC,OAAO,EAAE,0CAA0C;CACpD,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAoC;IAC1D,EAAE,EAAE,QAAQ,CAAC,EAAE;IACf,WAAW,EAAE,QAAQ,CAAC,EAAE;IACxB,YAAY,EAAE,QAAQ,CAAC,EAAE;IACzB,UAAU,EAAE,QAAQ,CAAC,GAAG;IACxB,UAAU,EAAE,QAAQ,CAAC,GAAG;IACxB,UAAU,EAAE,QAAQ,CAAC,GAAG;IACxB,cAAc,EAAE,QAAQ,CAAC,MAAM;IAC/B,eAAe,EAAE,QAAQ,CAAC,IAAI;IAC9B,kBAAkB,EAAE,QAAQ,CAAC,IAAI;IACjC,eAAe,EAAE,QAAQ,CAAC,IAAI;IAC9B,aAAa,EAAE,QAAQ,CAAC,GAAG;IAC3B,KAAK,EAAE,QAAQ,CAAC,KAAK;IACrB,SAAS,EAAE,QAAQ,CAAC,MAAM;IAC1B,eAAe,EAAE,QAAQ,CAAC,KAAK;IAC/B,UAAU,EAAE,QAAQ,CAAC,GAAG;IACxB,WAAW,EAAE,QAAQ,CAAC,IAAI;IAC1B,UAAU,EAAE,QAAQ,CAAC,IAAI;IACzB,OAAO,EAAE,MAAM;IACf,UAAU,EAAE,QAAQ,CAAC,IAAI;IACzB,UAAU,EAAE,QAAQ,CAAC,IAAI;IACzB,iBAAiB,EACf,2HAA2H;IAC7H,IAAI,EAAE,QAAQ,CAAC,IAAI;IACnB,aAAa,EAAE,QAAQ,CAAC,OAAO;IAC/B,cAAc,EAAE,QAAQ,CAAC,IAAI;IAC7B,aAAa,EAAE,kBAAkB;IACjC,kBAAkB,EAAE,gDAAgD;IACpE,gBAAgB,EAAE,QAAQ,CAAC,IAAI;IAC/B,aAAa,EAAE,QAAQ,CAAC,EAAE;IAC1B,mBAAmB,EAAE,QAAQ,CAAC,GAAG;CAClC,CAAC;AAEF,MAAM,CAAC,MAAM,aAAa,GAAoC;IAC5D,UAAU,EAAE,CAAC;IACb,UAAU,EAAE,EAAE;IACd,UAAU,EAAE,EAAE;IACd,eAAe,EAAE,CAAC;IAClB,kBAAkB,EAAE,CAAC;IACrB,eAAe,EAAE,CAAC;IAClB,UAAU,EAAE,EAAE;IACd,mBAAmB,EAAE,CAAC;CACvB,CAAC","sourcesContent":["// patterns are evolving over the years and thus with higher versions of the standards.\n// However, their limits are essentially not defined in other standards. This meaning OpenSCD\n// is not always using the pattern defined in the standard but the one using the user the best.\n// e.g the definition of the pattern for IP adresses does allow 300.300.300.300 which is clearly not\n//     a valid IP adress\nexport function getTypes(element: Element): string[] {\n  if (!element.ownerDocument) return [];\n\n  const scl: Element = element.ownerDocument.querySelector(':root')!;\n\n  const type =\n    (scl.getAttribute('version') ?? '2003') +\n    (scl.getAttribute('revision') ?? '') +\n    (scl.getAttribute('release') ?? '');\n\n  if (type === '2003') return pTypes2003;\n\n  if (type === '2007B') return pTypes2007B;\n\n  return pTypes2007B3;\n}\n\nconst pTypes2003: string[] = [\n  'IP',\n  'IP-SUBNET',\n  'IP-GATEWAY',\n  'OSI-TSEL',\n  'OSI-SSEL',\n  'OSI-PSEL',\n  'OSI-AP-Title',\n  'OSI-AP-Invoke',\n  'OSI-AE-Qualifier',\n  'OSI-AE-Invoke',\n  'OSI-NSAP',\n  'VLAN-ID',\n  'VLAN-PRIORITY',\n];\n\nconst pTypes2007B: string[] = [\n  ...pTypes2003,\n  'SNTP-Port',\n  'MMS-Port',\n  'DNSName',\n  'UDP-Port',\n  'TCP-Port',\n  'C37-118-IP-Port',\n];\n\nconst pTypes2007B3: string[] = [\n  ...pTypes2007B,\n  'IPv6',\n  'IPv6-SUBNET',\n  'IPv6-GATEWAY',\n  'IPv6FlowLabel',\n  'IPv6ClassOfTraffic',\n  'IPv6-IGMPv3Src',\n  'IP-IGMPv3Sr',\n  'IP-ClassOfTraffic',\n];\n\nconst pTypesGSESMV: string[] = [\n  'MAC-Address',\n  'APPID',\n  'VLAN-ID',\n  'VLAN-PRIORITY',\n];\n\nexport const typeNullable: Partial<Record<string, boolean>> = {\n  IP: false,\n  'IP-SUBNET': false,\n  'IP-GATEWAY': false,\n  'OSI-TSEL': false,\n  'OSI-SSEL': false,\n  'OSI-PSEL': false,\n  'OSI-AP-Title': true,\n  'OSI-AP-Invoke': true,\n  'OSI-AE-Qualifier': true,\n  'OSI-AE-Invoke': true,\n  'OSI-NSAP': true,\n  'MAC-Address': false,\n  APPID: false,\n  'VLAN-ID': true,\n  'VLAN-PRIORITY': true,\n  'SNTP-Port': true,\n  'MMS-Port': true,\n  DNSName: true,\n  'UDP-Port': true,\n  'TCP-Port': true,\n  'C37-118-IP-Port': true,\n  IPv6: true,\n  'IPv6-SUBNET': true,\n  'IPv6-GATEWAY': true,\n  IPv6FlowLabel: true,\n  IPv6ClassOfTraffic: true,\n  'IPv6-IGMPv3Src': true,\n  'IP-IGMPv3Sr': true,\n  'IP-ClassOfTraffic': true,\n};\n\nconst typeBase = {\n  IP:\n    '([0-9]{1,2}|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.([0-9]{1,2}|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.([0-9]{1,2}|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\\\.([0-9]{1,2}|1[0-9]{2}|2[0-4][0-9]|25[0-5])',\n  OSI: '[0-9A-F]+',\n  OSId: '[0-9]+',\n  OSIAPi: '[0-9\\u002C]+',\n  MAC:\n    '[0-9,A-F]{2}\\\\-[0-9,A-F]{2}\\\\-[0-9,A-F]{2}\\\\-[0-9,A-F]{2}\\\\-[0-9,A-F]{2}\\\\-[0-9,A-F]',\n  APPID: '[0-9A-F]{4}',\n  VLANp: '[0-7]',\n  VLANid: '[0-9A-F]{3}',\n  port:\n    '0|([1-9][0-9]{0,3})|([1-5][0-9]{4,4})|(6[0-4][0-9]{3,3})|(65[0-4][0-9]{2,2})|(655[0-2][0-9])|(6553[0-5])',\n  IPv6: '([0-9a-f]{1,4}:){7}[0-9a-f]{1,4}',\n  IPv6sub: '/[1-9]|/[1-9][0-9]|/1[0-1][0-9]|/12[0-7]',\n};\n\nexport const typePattern: Partial<Record<string, string>> = {\n  IP: typeBase.IP,\n  'IP-SUBNET': typeBase.IP,\n  'IP-GATEWAY': typeBase.IP,\n  'OSI-TSEL': typeBase.OSI,\n  'OSI-SSEL': typeBase.OSI,\n  'OSI-PSEL': typeBase.OSI,\n  'OSI-AP-Title': typeBase.OSIAPi,\n  'OSI-AP-Invoke': typeBase.OSId,\n  'OSI-AE-Qualifier': typeBase.OSId,\n  'OSI-AE-Invoke': typeBase.OSId,\n  'MAC-Address': typeBase.MAC,\n  APPID: typeBase.APPID,\n  'VLAN-ID': typeBase.VLANid,\n  'VLAN-PRIORITY': typeBase.VLANp,\n  'OSI-NSAP': typeBase.OSI,\n  'SNTP-Port': typeBase.port,\n  'MMS-Port': typeBase.port,\n  DNSName: '\\\\S*',\n  'UDP-Port': typeBase.port,\n  'TCP-Port': typeBase.port,\n  'C37-118-IP-Port':\n    '102[5-9]|10[3-9][0-9]|1[1-9][0-9][0-9]|[2-9][0-9]{3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5]',\n  IPv6: typeBase.IPv6,\n  'IPv6-SUBNET': typeBase.IPv6sub,\n  'IPv6-GATEWAY': typeBase.IPv6,\n  IPv6FlowLabel: '[0-9a-fA-F]{1,5}',\n  IPv6ClassOfTraffic: '[0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]',\n  'IPv6-IGMPv3Src': typeBase.IPv6,\n  'IP-IGMPv3Sr': typeBase.IP,\n  'IP-ClassOfTraffic': typeBase.OSI,\n};\n\nexport const typeMaxLength: Partial<Record<string, number>> = {\n  'OSI-TSEL': 8,\n  'OSI-SSEL': 16,\n  'OSI-PSEL': 16,\n  'OSI-AP-Invoke': 5,\n  'OSI-AE-Qualifier': 5,\n  'OSI-AE-Invoke': 5,\n  'OSI-NSAP': 40,\n  'IP-ClassOfTraffic': 2,\n};\n"]}