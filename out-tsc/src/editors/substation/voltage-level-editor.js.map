{"version":3,"file":"voltage-level-editor.js","sourceRoot":"","sources":["../../../../src/editors/substation/voltage-level-editor.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  LitElement,\n  TemplateResult,\n  customElement,\n  html,\n  property,\n  query,\n  css,\n} from 'lit-element';\nimport { translate, get } from 'lit-translate';\n\nimport {\n  CloseableElement,\n  EditorAction,\n  newWizardEvent,\n  Wizard,\n  WizardAction,\n  WizardInput,\n  newActionEvent,\n  getValue,\n  getMultiplier,\n} from '../../foundation.js';\n\nimport './bay-editor.js';\nimport { BayEditor } from './bay-editor.js';\nimport { iedIcon } from '../../icons.js';\nimport { editlNode } from './lnodewizard.js';\n\ninterface VoltageLevelUpdateOptions {\n  element: Element;\n}\ninterface VoltageLevelCreateOptions {\n  parent: Element;\n}\ntype VoltageLevelWizardOptions =\n  | VoltageLevelUpdateOptions\n  | VoltageLevelCreateOptions;\nfunction isVoltageLevelCreateOptions(\n  options: VoltageLevelWizardOptions\n): options is VoltageLevelCreateOptions {\n  return (<VoltageLevelCreateOptions>options).parent !== undefined;\n}\n\nconst initial = {\n  nomFreq: '50',\n  numPhases: '3',\n  Voltage: '110',\n  multiplier: 'k',\n};\n\n@customElement('voltage-level-editor')\nexport class VoltageLevelEditor extends LitElement {\n  @property()\n  parent!: Element;\n  @property()\n  element!: Element;\n  @property()\n  get name(): string {\n    return this.element.getAttribute('name') ?? '';\n  }\n  @property()\n  get desc(): string | null {\n    return this.element.getAttribute('desc') ?? null;\n  }\n  @property()\n  get voltage(): string | null {\n    const V = this.element.querySelector('Voltage');\n    if (V === null) return null;\n    const v = V.textContent ?? '';\n    const m = V.getAttribute('multiplier');\n    const u = m === null ? 'V' : ' ' + m + 'V';\n    return v ? v + u : null;\n  }\n\n  @query('h2') header!: Element;\n\n  openEditWizard(): void {\n    this.dispatchEvent(\n      newWizardEvent(VoltageLevelEditor.wizard({ element: this.element }))\n    );\n  }\n\n  openBayWizard(): void {\n    if (!this.element) return;\n    const event = newWizardEvent(BayEditor.wizard({ parent: this.element }));\n    this.dispatchEvent(event);\n  }\n\n  openLNodeWizard(): void {\n    this.dispatchEvent(newWizardEvent(editlNode(this.element)));\n  }\n\n  removeAction(): void {\n    if (this.element)\n      this.dispatchEvent(\n        newActionEvent({\n          old: { parent: this.parent, element: this.element, reference: null },\n        })\n      );\n  }\n\n  renderHeader(): TemplateResult {\n    return html`<div id=\"header\">\n      <h2>\n        ${this.name} ${this.desc === null ? '' : html`&mdash;`} ${this.desc}\n        ${this.voltage === null ? '' : html`(${this.voltage})`}\n      </h2>\n      <div id=\"header-icon\">\n        <mwc-icon-button @click=${() => this.openLNodeWizard()}\n          >${iedIcon}</mwc-icon-button\n        >\n        <mwc-icon-button\n          icon=\"edit\"\n          @click=${() => this.openEditWizard()}\n        ></mwc-icon-button>\n        <mwc-icon-button\n          icon=\"delete\"\n          @click=${() => this.removeAction()}\n        ></mwc-icon-button>\n        <span style=\"position:relative;float:right;\">&vert;</span>\n        <mwc-icon-button\n          icon=\"playlist_add\"\n          @click=${() => this.openBayWizard()}\n        ></mwc-icon-button>\n      </div>\n    </div>`;\n  }\n\n  render(): TemplateResult {\n    return html`<div id=\"conainer\">\n      ${this.renderHeader()}\n      <div id=\"voltageLevelContainer\">\n        ${Array.from(this.element?.querySelectorAll('Bay') ?? []).map(\n          bay =>\n            html`<bay-editor\n              .element=${bay}\n              .parent=${this.element}\n            ></bay-editor>`\n        )}\n      </div>\n    </div>`;\n  }\n\n  static createAction(parent: Element): WizardAction {\n    return (\n      inputs: WizardInput[],\n      wizard: CloseableElement\n    ): EditorAction[] => {\n      const name = getValue(inputs.find(i => i.label === 'name')!);\n      const desc = getValue(inputs.find(i => i.label === 'desc')!);\n      const nomFreq = getValue(inputs.find(i => i.label === 'nomFreq')!);\n      const numPhases = getValue(inputs.find(i => i.label === 'numPhases')!);\n      const Voltage = getValue(inputs.find(i => i.label === 'Voltage')!);\n      const multiplier = getMultiplier(\n        inputs.find(i => i.label === 'Voltage')!\n      );\n\n      const action = {\n        new: {\n          parent,\n          element: new DOMParser().parseFromString(\n            `<VoltageLevel\n              name=\"${name}\"\n              ${desc === null ? '' : `desc=\"${desc}\"`}\n              ${nomFreq === null ? '' : `nomFreq=\"${nomFreq}\"`}\n              ${numPhases === null ? '' : `numPhases=\"${numPhases}\"`}\n            >${\n              Voltage === null\n                ? ''\n                : `<Voltage unit=\"V\" ${\n                    multiplier === null ? '' : `multiplier=\"${multiplier}\"`\n                  }\n            >${Voltage}</Voltage>`\n            }</VoltageLevel>`,\n            'application/xml'\n          ).documentElement,\n          reference: null,\n        },\n      };\n\n      wizard.close();\n      return [action];\n    };\n  }\n\n  static updateAction(element: Element): WizardAction {\n    return (\n      inputs: WizardInput[],\n      wizard: CloseableElement\n    ): EditorAction[] => {\n      const name = inputs.find(i => i.label === 'name')!.value;\n      const desc = getValue(inputs.find(i => i.label === 'desc')!);\n      const nomFreq = getValue(inputs.find(i => i.label === 'nomFreq')!);\n      const numPhases = getValue(inputs.find(i => i.label === 'numPhases')!);\n      const Voltage = getValue(inputs.find(i => i.label === 'Voltage')!);\n      const multiplier = getMultiplier(\n        inputs.find(i => i.label === 'Voltage')!\n      );\n\n      let voltageLevelAction: EditorAction | null;\n      let voltageAction: EditorAction | null;\n\n      if (\n        name === element.getAttribute('name') &&\n        desc === element.getAttribute('desc') &&\n        nomFreq === element.getAttribute('nomFreq') &&\n        numPhases === element.getAttribute('numPhases')\n      ) {\n        voltageLevelAction = null;\n      } else {\n        const newElement = <Element>element.cloneNode(false);\n        newElement.setAttribute('name', name);\n        if (desc === null) newElement.removeAttribute('desc');\n        else newElement.setAttribute('desc', desc);\n        if (nomFreq === null) newElement.removeAttribute('nomFreq');\n        else newElement.setAttribute('nomFreq', nomFreq);\n        if (numPhases === null) newElement.removeAttribute('numPhases');\n        else newElement.setAttribute('numPhases', numPhases);\n        voltageLevelAction = { old: { element }, new: { element: newElement } };\n      }\n\n      if (\n        Voltage ===\n          (element.querySelector('Voltage')?.textContent?.trim() ?? null) &&\n        multiplier ===\n          (element.querySelector('Voltage')?.getAttribute('multiplier') ?? null)\n      ) {\n        voltageAction = null;\n      } else {\n        const oldVoltage = element.querySelector('Voltage');\n\n        if (oldVoltage === null) {\n          const newVoltage = new DOMParser().parseFromString(\n            '<Voltage unit=\"V\"></Voltage>',\n            'application/xml'\n          ).documentElement;\n          newVoltage.textContent = Voltage;\n          if (multiplier !== null)\n            newVoltage.setAttribute('multiplier', multiplier);\n          voltageAction = {\n            new: {\n              parent: voltageLevelAction?.new.element ?? element,\n              element: newVoltage,\n              reference: element.firstElementChild,\n            },\n          };\n        } else {\n          if (Voltage === null)\n            voltageAction = {\n              old: {\n                parent: voltageLevelAction?.new.element ?? element,\n                element: oldVoltage,\n                reference: oldVoltage.nextElementSibling,\n              },\n            };\n          else {\n            const newVoltage = <Element>oldVoltage.cloneNode(false);\n            newVoltage.textContent = Voltage;\n            if (multiplier === null) newVoltage.removeAttribute('multiplier');\n            else newVoltage.setAttribute('multiplier', multiplier);\n            voltageAction = {\n              old: { element: oldVoltage },\n              new: { element: newVoltage },\n            };\n          }\n        }\n      }\n\n      if (voltageLevelAction || voltageAction) wizard.close();\n      const actions: EditorAction[] = [];\n      if (voltageLevelAction) actions.push(voltageLevelAction);\n      if (voltageAction) actions.push(voltageAction);\n      return actions;\n    };\n  }\n\n  static wizard(options: VoltageLevelWizardOptions): Wizard {\n    const [\n      heading,\n      actionName,\n      actionIcon,\n      action,\n    ] = isVoltageLevelCreateOptions(options)\n      ? [\n          get('voltagelevel.wizard.title.add'),\n          get('add'),\n          'add',\n          VoltageLevelEditor.createAction(options.parent),\n        ]\n      : [\n          get('voltagelevel.wizard.title.edit'),\n          get('save'),\n          'edit',\n          VoltageLevelEditor.updateAction(options.element),\n        ];\n    const [\n      name,\n      desc,\n      nomFreq,\n      numPhases,\n      Voltage,\n      multiplier,\n    ] = isVoltageLevelCreateOptions(options)\n      ? [\n          '',\n          null,\n          initial.nomFreq,\n          initial.numPhases,\n          initial.Voltage,\n          initial.multiplier,\n        ]\n      : [\n          options.element.getAttribute('name'),\n          options.element.getAttribute('desc'),\n          options.element.getAttribute('nomFreq'),\n          options.element.getAttribute('numPhases'),\n          options.element.querySelector('Voltage')?.textContent?.trim() ?? null,\n          options.element\n            .querySelector('Voltage')\n            ?.getAttribute('multiplier') ?? null,\n        ];\n    return [\n      {\n        title: heading,\n        primary: {\n          icon: actionIcon,\n          label: actionName,\n          action: action,\n        },\n        content: [\n          html`<wizard-textfield\n            label=\"name\"\n            .maybeValue=${name}\n            helper=\"${translate('voltagelevel.wizard.nameHelper')}\"\n            iconTrailing=\"title\"\n            required\n            validationMessage=\"${translate('textfield.required')}\"\n            dialogInitialFocus\n          ></wizard-textfield>`,\n          html`<wizard-textfield\n            label=\"desc\"\n            .maybeValue=${desc}\n            nullable=\"true\"\n            helper=\"${translate('voltagelevel.wizard.descHelper')}\"\n            iconTrailing=\"description\"\n          ></wizard-textfield>`,\n          html`<wizard-textfield\n            label=\"nomFreq\"\n            .maybeValue=${nomFreq}\n            nullable=\"true\"\n            helper=\"${translate('voltagelevel.wizard.nomFreqHelper')}\"\n            suffix=\"Hz\"\n            required\n            validationMessage=\"${translate('textfield.nonempty')}\"\n            pattern=\"[0-9]*[.]?[0-9]+\"\n          ></wizard-textfield>`,\n          html`<wizard-textfield\n            label=\"numPhases\"\n            .maybeValue=${numPhases}\n            nullable=\"true\"\n            helper=\"${translate('voltagelevel.wizard.numPhaseHelper')}\"\n            suffix=\"#\"\n            required\n            validationMessage=\"${translate('textfield.nonempty')}\"\n            type=\"number\"\n            min=\"1\"\n            max=\"255\"\n          ></wizard-textfield>`,\n          html`<wizard-textfield\n            label=\"Voltage\"\n            .maybeValue=${Voltage}\n            nullable\n            unit=\"V\"\n            .multipliers=${[null, 'G', 'M', 'k', '', 'm']}\n            .multiplier=${multiplier}\n            helper=\"${translate('voltagelevel.wizard.voltageHelper')}\"\n            required\n            validationMessage=\"${translate('textfield.nonempty')}\"\n            pattern=\"[0-9]*[.]?[0-9]+\"\n          ></wizard-textfield>`,\n        ],\n      },\n    ];\n  }\n\n  static styles = css`\n    #conainer {\n      background-color: var(--mdc-theme-on-primary);\n      color: var(--mdc-theme-on-surface);\n      margin: 10px;\n    }\n\n    #header {\n      display: flex;\n    }\n\n    #header-icon {\n      display: flex;\n      align-items: center;\n    }\n\n    h2 {\n      font-family: 'Roboto', sans-serif;\n      font-weight: 300;\n      overflow: hidden;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      flex: auto;\n      padding-left: 0.5em;\n    }\n\n    #voltageLevelContainer {\n      display: flex;\n      flex-direction: row;\n      overflow-x: auto;\n      overflow-y: hidden;\n    }\n\n    svg {\n      width: 25px;\n      height: 25px;\n      position: relative;\n      padding: 5px;\n    }\n  `;\n}\n"]}