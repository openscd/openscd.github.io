{"version":3,"file":"datype-wizards.js","sourceRoot":"","sources":["../../../../src/editors/templates/datype-wizards.ts"],"names":[],"mappings":"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","sourcesContent":["import { html } from 'lit-element';\nimport { get, translate } from 'lit-translate';\n\nimport {\n  createElement,\n  EditorAction,\n  getReference,\n  getValue,\n  identity,\n  isPublic,\n  newActionEvent,\n  newWizardEvent,\n  patterns,\n  SCLTag,\n  selector,\n  Wizard,\n  WizardActor,\n  WizardInput,\n} from '../../foundation.js';\nimport {\n  addReferencedDataTypes,\n  allDataTypeSelector,\n  buildListFromStringArray,\n  predefinedBasicTypeEnum,\n  updateIDNamingAction,\n  valKindEnum,\n} from './foundation.js';\n\nimport { List } from '@material/mwc-list';\nimport { ListItem } from '@material/mwc-list/mwc-list-item';\nimport { Select } from '@material/mwc-select';\nimport {\n  SelectedEvent,\n  SingleSelectedEvent,\n} from '@material/mwc-list/mwc-list-foundation';\n\ninterface UpdateOptions {\n  identity: string | null;\n  doc: XMLDocument;\n}\ninterface CreateOptions {\n  parent: Element;\n}\nexport type WizardOptions = UpdateOptions | CreateOptions;\n\nfunction updateBDaAction(element: Element): WizardActor {\n  return (inputs: WizardInput[]): EditorAction[] => {\n    const name = getValue(inputs.find(i => i.label === 'name')!)!;\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const bType = getValue(inputs.find(i => i.label === 'bType')!)!;\n    const type =\n      bType === 'Enum' || bType === 'Struct'\n        ? getValue(inputs.find(i => i.label === 'type')!)\n        : null;\n    const sAddr = getValue(inputs.find(i => i.label === 'sAddr')!);\n    const valKind =\n      getValue(inputs.find(i => i.label === 'valKind')!) !== ''\n        ? getValue(inputs.find(i => i.label === 'valKind')!)\n        : null;\n    const valImport =\n      getValue(inputs.find(i => i.label === 'valImport')!) !== ''\n        ? getValue(inputs.find(i => i.label === 'valImport')!)\n        : null;\n\n    const actions: EditorAction[] = [];\n    if (\n      name === element.getAttribute('name') &&\n      desc === element.getAttribute('desc') &&\n      bType === element.getAttribute('bType') &&\n      type === element.getAttribute('type') &&\n      sAddr === element.getAttribute('sAddr') &&\n      valKind === element.getAttribute('valKind') &&\n      valImport === element.getAttribute('valImprot')\n    ) {\n      return [];\n    }\n\n    const newElement = <Element>element.cloneNode(false);\n    newElement.setAttribute('name', name);\n    if (desc === null) newElement.removeAttribute('desc');\n    else newElement.setAttribute('desc', desc);\n    newElement.setAttribute('bType', bType);\n    if (type === null) newElement.removeAttribute('type');\n    else newElement.setAttribute('type', type);\n    if (sAddr === null) newElement.removeAttribute('sAddr');\n    else newElement.setAttribute('sAddr', sAddr);\n    if (valKind === null) newElement.removeAttribute('valKind');\n    else newElement.setAttribute('valKind', valKind);\n    if (valImport === null) newElement.removeAttribute('valImport');\n    else newElement.setAttribute('valImport', valImport);\n    actions.push({\n      old: { element },\n      new: { element: newElement },\n    });\n\n    return actions;\n  };\n}\n\nfunction createBDaAction(parent: Element): WizardActor {\n  return (inputs: WizardInput[]): EditorAction[] => {\n    const name = getValue(inputs.find(i => i.label === 'name')!)!;\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const bType = getValue(inputs.find(i => i.label === 'bType')!)!;\n    const type =\n      bType === 'Enum' || bType === 'Struct'\n        ? getValue(inputs.find(i => i.label === 'type')!)\n        : null;\n    const sAddr = getValue(inputs.find(i => i.label === 'sAddr')!);\n    const valKind =\n      getValue(inputs.find(i => i.label === 'valKind')!) !== ''\n        ? getValue(inputs.find(i => i.label === 'valKind')!)\n        : null;\n    const valImport =\n      getValue(inputs.find(i => i.label === 'valImport')!) !== ''\n        ? getValue(inputs.find(i => i.label === 'valImport')!)\n        : null;\n\n    const actions: EditorAction[] = [];\n\n    const element = createElement(parent.ownerDocument, 'BDA', {\n      name,\n      desc,\n      bType,\n      type,\n      sAddr,\n      valKind,\n      valImport,\n    });\n    actions.push({\n      new: {\n        parent,\n        element,\n        reference: getReference(parent, <SCLTag>element.tagName),\n      },\n    });\n\n    return actions;\n  };\n}\n\nfunction bDAWizard(options: WizardOptions): Wizard | undefined {\n  const doc = (<UpdateOptions>options).doc\n    ? (<UpdateOptions>options).doc\n    : (<CreateOptions>options).parent.ownerDocument;\n  const bda =\n    Array.from(\n      doc.querySelectorAll(\n        selector('BDA', (<UpdateOptions>options).identity ?? NaN)\n      )\n    ).find(isPublic) ?? null;\n\n  const [\n    title,\n    action,\n    type,\n    deleteButton,\n    name,\n    desc,\n    bTypeList,\n    sAddr,\n    valKindList,\n    valImportList,\n  ] = bda\n    ? [\n        get('bda.wizard.title.edit'),\n        updateBDaAction(bda),\n        bda.getAttribute('type'),\n        html`<mwc-button\n          icon=\"delete\"\n          trailingIcon\n          label=\"${translate('delete')}\"\n          @click=${(e: MouseEvent) => {\n            e.target!.dispatchEvent(newWizardEvent());\n            e.target!.dispatchEvent(\n              newActionEvent({\n                old: {\n                  parent: bda.parentElement!,\n                  element: bda,\n                  reference: bda.nextElementSibling,\n                },\n              })\n            );\n          }}\n          fullwidth\n        ></mwc-button> `,\n        bda.getAttribute('name'),\n        bda.getAttribute('desc'),\n        buildListFromStringArray(\n          predefinedBasicTypeEnum,\n          bda.getAttribute('bType')\n        ),\n        bda.getAttribute('sAddr'),\n        buildListFromStringArray(valKindEnum, bda.getAttribute('valKind')),\n        buildListFromStringArray(\n          [null, 'true', 'false'],\n          bda.getAttribute('valImport')\n        ),\n      ]\n    : [\n        get('bda.wizard.title.add'),\n        createBDaAction((<CreateOptions>options).parent),\n        null,\n        html``,\n        '',\n        null,\n        buildListFromStringArray(predefinedBasicTypeEnum, 'Struct'),\n        null,\n        buildListFromStringArray(valKindEnum, null),\n        buildListFromStringArray([null, 'true', 'false'], null),\n      ];\n\n  const types = Array.from(doc.querySelectorAll('DAType, EnumType'))\n    .filter(isPublic)\n    .filter(type => type.getAttribute('id'));\n\n  return [\n    {\n      title,\n      primary: { icon: '', label: get('save'), action: action },\n      content: [\n        deleteButton,\n        html`<wizard-textfield\n          label=\"name\"\n          .maybeValue=${name}\n          helper=\"${translate('scl.name')}\"\n          required\n          pattern=\"${patterns.alphanumeric}\"\n          dialogInitialFocus\n        >\n          ></wizard-textfield\n        >`,\n        html`<wizard-textfield\n          label=\"desc\"\n          helper=\"${translate('scl.desc')}\"\n          .maybeValue=${desc}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n        html`<mwc-select\n          fixedMenuPosition\n          label=\"bType\"\n          helper=\"${translate('bda.wizard.bType')}\"\n          required\n          @selected=${(e: SelectedEvent) => {\n            const bTypeOriginal = bda?.getAttribute('bType') ?? '';\n            const bType = (<Select>e.target).selected!.value!;\n\n            const typeUI = <Select>(\n              (<Select>e.target).parentElement!.querySelector(\n                'mwc-select[label=\"type\"]'\n              )!\n            );\n\n            Array.from(typeUI.children).forEach(child => {\n              (<ListItem>child).disabled = !child.classList.contains(bType);\n              (<ListItem>child).noninteractive =\n                !child.classList.contains(bType);\n              (<ListItem>child).style.display = !child.classList.contains(bType)\n                ? 'none'\n                : '';\n              (<ListItem>child).selected =\n                bTypeOriginal === bType\n                  ? (<ListItem>child).value === type\n                  : child.classList.contains(bType);\n            });\n\n            typeUI.disabled = !(bType === 'Enum' || bType === 'Struct');\n            typeUI.requestUpdate();\n          }}\n          >${bTypeList}</mwc-select\n        >`,\n        html`<mwc-select\n          fixedMenuPosition\n          label=\"type\"\n          helper=\"${translate('bda.wizard.type')}\"\n          >${types.map(\n            dataType =>\n              html`<mwc-list-item\n                class=\"${dataType.tagName === 'EnumType' ? 'Enum' : 'Struct'}\"\n                value=${dataType.id}\n                ?selected=${dataType.id === type}\n                >${dataType.id}</mwc-list-item\n              >`\n          )}</mwc-select\n        >`,\n        html`<wizard-textfield\n          label=\"sAddr\"\n          helper=\"${translate('bda.wizard.sAddr')}\"\n          .maybeValue=${sAddr}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n        html`<mwc-select\n          label=\"valKind\"\n          helper=\"${translate('bda.wizard.valKind')}\"\n          fixedMenuPosition\n          >${valKindList}</mwc-select\n        >`,\n        html`<mwc-select\n          fixedMenuPosition\n          label=\"valImport\"\n          helper=\"${translate('bda.wizard.valImport')}\"\n          >${valImportList}</mwc-select\n        >`,\n      ],\n    },\n  ];\n}\n\nexport function dATypeWizard(\n  dATypeIdentity: string,\n  doc: XMLDocument\n): Wizard | undefined {\n  const datype = doc.querySelector(selector('DAType', dATypeIdentity));\n  if (!datype) return undefined;\n\n  return [\n    {\n      title: get('datype.wizard.title.edit'),\n      primary: {\n        icon: '',\n        label: get('save'),\n        action: updateIDNamingAction(datype),\n      },\n      content: [\n        html`<mwc-button\n          icon=\"delete\"\n          trailingIcon\n          label=\"${translate('delete')}\"\n          @click=${(e: MouseEvent) => {\n            e.target!.dispatchEvent(newWizardEvent());\n            e.target!.dispatchEvent(\n              newActionEvent({\n                old: {\n                  parent: datype.parentElement!,\n                  element: datype,\n                  reference: datype.nextElementSibling,\n                },\n              })\n            );\n          }}\n          fullwidth\n        ></mwc-button> `,\n        html`<wizard-textfield\n          label=\"id\"\n          helper=\"${translate('scl.id')}\"\n          .maybeValue=${datype.getAttribute('id')}\n          required\n          maxlength=\"127\"\n          minlength=\"1\"\n          pattern=\"${patterns.nmToken}\"\n          dialogInitialFocus\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"desc\"\n          helper=\"${translate('scl.desc')}\"\n          .maybeValue=${datype.getAttribute('desc')}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n        html`<mwc-button\n            slot=\"graphic\"\n            icon=\"playlist_add\"\n            trailingIcon\n            label=\"${translate('scl.BDA')}\"\n            @click=${(e: Event) => {\n              const wizard = bDAWizard({\n                parent: datype,\n              });\n              if (wizard) e.target!.dispatchEvent(newWizardEvent(wizard));\n              e.target!.dispatchEvent(newWizardEvent());\n            }}\n          ></mwc-button>\n          <mwc-list\n            style=\"margin-top: 0px;\"\n            @selected=${(e: SingleSelectedEvent) => {\n              const wizard = bDAWizard({\n                identity: (<ListItem>(<List>e.target).selected).value,\n                doc,\n              });\n              if (wizard) e.target!.dispatchEvent(newWizardEvent(wizard));\n              e.target!.dispatchEvent(newWizardEvent());\n            }}\n          >\n            ${Array.from(datype.querySelectorAll('BDA')).map(\n              bda =>\n                html`<mwc-list-item\n                  twoline\n                  tabindex=\"0\"\n                  value=\"${identity(bda)}\"\n                  ><span>${bda.getAttribute('name')}</span\n                  ><span slot=\"secondary\"\n                    >${bda.getAttribute('bType') === 'Enum' ||\n                    bda.getAttribute('bType') === 'Struct'\n                      ? '#' + bda.getAttribute('type')\n                      : bda.getAttribute('bType')}</span\n                  ></mwc-list-item\n                >`\n            )}\n          </mwc-list> `,\n      ],\n    },\n  ];\n}\n\nfunction addPredefinedDAType(\n  parent: Element,\n  templates: XMLDocument\n): WizardActor {\n  return (inputs: WizardInput[]): EditorAction[] => {\n    const id = getValue(inputs.find(i => i.label === 'id')!);\n\n    if (!id) return [];\n\n    const existId = Array.from(\n      templates.querySelectorAll(allDataTypeSelector)\n    ).some(type => type.getAttribute('id') === id);\n\n    if (existId) return [];\n\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const values = <Select>inputs.find(i => i.label === 'values');\n    const selectedElement = values.selected\n      ? templates.querySelector(`DAType[id=\"${values.selected.value}\"]`)\n      : null;\n    const element = values.selected\n      ? <Element>selectedElement!.cloneNode(true)\n      : parent.ownerDocument.createElement('DAType');\n\n    element.setAttribute('id', id);\n    if (desc) element.setAttribute('desc', desc);\n\n    const actions = [];\n\n    if (selectedElement)\n      addReferencedDataTypes(selectedElement, parent).forEach(action =>\n        actions.push(action)\n      );\n\n    actions.push({\n      new: {\n        parent,\n        element,\n        reference: getReference(parent, <SCLTag>element.tagName),\n      },\n    });\n\n    return actions;\n  };\n}\n\nexport function createDATypeWizard(\n  parent: Element,\n  templates: Document\n): Wizard {\n  return [\n    {\n      title: get('datype.wizard.title.add'),\n      primary: {\n        icon: 'add',\n        label: get('add'),\n        action: addPredefinedDAType(parent, templates),\n      },\n      content: [\n        html`<mwc-select\n          fixedMenuPosition\n          outlined\n          icon=\"playlist_add_check\"\n          label=\"values\"\n          helper=\"Default enumerations\"\n        >\n          ${Array.from(templates.querySelectorAll('DAType')).map(\n            datype =>\n              html`<mwc-list-item\n                graphic=\"icon\"\n                hasMeta\n                value=\"${datype.getAttribute('id') ?? ''}\"\n                ><span\n                  >${datype.getAttribute('id')?.replace('OpenSCD_', '')}</span\n                >\n                <span slot=\"meta\"\n                  >${datype.querySelectorAll('BDA').length}</span\n                >\n              </mwc-list-item>`\n          )}\n        </mwc-select>`,\n        html`<wizard-textfield\n          label=\"id\"\n          helper=\"${translate('scl.id')}\"\n          .maybeValue=${''}\n          required\n          maxlength=\"255\"\n          minlength=\"1\"\n          pattern=\"${patterns.nmToken}\"\n          dialogInitialFocus\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"desc\"\n          helper=\"${translate('scl.desc')}\"\n          .maybeValue=${null}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n      ],\n    },\n  ];\n}\n"]}