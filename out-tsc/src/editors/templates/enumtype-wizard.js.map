{"version":3,"file":"enumtype-wizard.js","sourceRoot":"","sources":["../../../../src/editors/templates/enumtype-wizard.ts"],"names":[],"mappings":"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","sourcesContent":["import { html } from 'lit-element';\nimport { get, translate } from 'lit-translate';\n\nimport {\n  cloneElement,\n  createElement,\n  EditorAction,\n  getReference,\n  getValue,\n  identity,\n  isPublic,\n  newActionEvent,\n  newWizardEvent,\n  patterns,\n  SCLTag,\n  selector,\n  Wizard,\n  WizardActor,\n  WizardInput,\n} from '../../foundation.js';\nimport {\n  CreateOptions,\n  updateIDNamingAction,\n  UpdateOptions,\n  WizardOptions,\n} from './foundation.js';\n\nimport { List } from '@material/mwc-list';\nimport { ListItem } from '@material/mwc-list/mwc-list-item';\nimport { SingleSelectedEvent } from '@material/mwc-list/mwc-list-foundation';\nimport { Select } from '@material/mwc-select';\n\nfunction nextOrd(parent: Element): string {\n  const maxOrd = Math.max(\n    ...Array.from(parent.children).map(child =>\n      parseInt(child.getAttribute('ord') ?? '-2', 10)\n    )\n  );\n  return isFinite(maxOrd) ? (maxOrd + 1).toString(10) : '0';\n}\n\nfunction createEnumValAction(parent: Element): WizardActor {\n  return (inputs: WizardInput[]): EditorAction[] => {\n    const value = getValue(inputs.find(i => i.label === 'value')!);\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const ord =\n      getValue(inputs.find(i => i.label === 'ord')!) || nextOrd(parent);\n\n    const element = createElement(parent.ownerDocument, 'EnumVal', {\n      ord,\n      desc,\n    });\n\n    element.textContent = value;\n\n    const action = {\n      new: {\n        parent,\n        element,\n        reference: getReference(parent, 'EnumVal'),\n      },\n    };\n\n    return [action];\n  };\n}\n\nfunction updateEnumValAction(element: Element): WizardActor {\n  return (inputs: WizardInput[]): EditorAction[] => {\n    const value = getValue(inputs.find(i => i.label === 'value')!) ?? '';\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const ord =\n      getValue(inputs.find(i => i.label === 'ord')!) ||\n      element.getAttribute('ord') ||\n      nextOrd(element.parentElement!);\n\n    if (\n      value === element.textContent &&\n      desc === element.getAttribute('desc') &&\n      ord === element.getAttribute('ord')\n    )\n      return [];\n\n    const newElement = cloneElement(element, { desc, ord });\n    newElement.textContent = value;\n\n    return [{ old: { element }, new: { element: newElement } }];\n  };\n}\n\nfunction eNumValWizard(options: WizardOptions): Wizard {\n  const doc = (<UpdateOptions>options).doc\n    ? (<UpdateOptions>options).doc\n    : (<CreateOptions>options).parent.ownerDocument;\n  const enumval =\n    Array.from(\n      doc.querySelectorAll(\n        selector('EnumVal', (<UpdateOptions>options).identity ?? NaN)\n      )\n    ).find(isPublic) ?? null;\n\n  const [title, action, ord, desc, value, deleteButton] = enumval\n    ? [\n        get('enum-val.wizard.title.edit'),\n        updateEnumValAction(enumval),\n        enumval.getAttribute('ord'),\n        enumval.getAttribute('desc'),\n        enumval.textContent,\n        html`<mwc-button\n          icon=\"delete\"\n          trailingIcon\n          label=${translate('delete')}\n          @click=${(e: MouseEvent) => {\n            e.target!.dispatchEvent(newWizardEvent());\n            e.target!.dispatchEvent(\n              newActionEvent({\n                old: {\n                  parent: enumval.parentElement!,\n                  element: enumval,\n                  reference: enumval.nextSibling,\n                },\n              })\n            );\n          }}\n          fullwidth\n        ></mwc-button>`,\n      ]\n    : [\n        get('enum-val.wizard.title.add'),\n        createEnumValAction((<CreateOptions>options).parent),\n        nextOrd((<CreateOptions>options).parent),\n        null, // desc is uncommon on EnumVal\n        '',\n        html``,\n      ];\n\n  return [\n    {\n      title,\n      element: enumval ?? undefined,\n      primary: {\n        icon: '',\n        label: 'Save',\n        action: action,\n      },\n      content: [\n        deleteButton,\n        html`<wizard-textfield\n          label=\"ord\"\n          helper=\"${translate('scl.ord')}\"\n          .maybeValue=${ord}\n          required\n          type=\"number\"\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"value\"\n          helper=\"${translate('scl.value')}\"\n          .maybeValue=${value}\n          pattern=\"${patterns.normalizedString}\"\n          dialogInitialFocus\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          id=\"evDesc\"\n          label=\"desc\"\n          helper=\"${translate('scl.desc')}\"\n          .maybeValue=${desc}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n      ],\n    },\n  ];\n}\n\nfunction createAction(parent: Element, templates: XMLDocument): WizardActor {\n  return (inputs: WizardInput[]): EditorAction[] => {\n    const id = getValue(inputs.find(i => i.label === 'id')!);\n\n    if (!id) return [];\n\n    const desc = getValue(inputs.find(i => i.label === 'desc')!);\n    const values = <Select>inputs.find(i => i.label === 'values');\n    const element = values.selected\n      ? <Element>(\n          templates\n            .querySelector(`EnumType[id=\"${values.selected.value}\"]`)!\n            .cloneNode(true)\n        )\n      : parent.ownerDocument.createElement('EnumType');\n\n    element.setAttribute('id', id);\n    if (desc) element.setAttribute('desc', desc);\n\n    const action = {\n      new: {\n        parent,\n        element,\n        reference: getReference(parent, <SCLTag>element.tagName),\n      },\n    };\n\n    return [action];\n  };\n}\n\nexport function createEnumTypeWizard(\n  parent: Element,\n  templates: Document\n): Wizard {\n  return [\n    {\n      title: get('enum.wizard.title.add'),\n      primary: {\n        icon: 'add',\n        label: get('add'),\n        action: createAction(parent, templates),\n      },\n      content: [\n        html`<mwc-select\n          style=\"--mdc-menu-max-height: 196px;\"\n          outlined\n          icon=\"playlist_add_check\"\n          label=\"values\"\n          helper=\"Default enumerations\"\n        >\n          ${Array.from(templates.querySelectorAll('EnumType')).map(\n            e =>\n              html`<mwc-list-item\n                graphic=\"icon\"\n                hasMeta\n                value=\"${e.getAttribute('id') ?? ''}\"\n                ><span>${e.getAttribute('id')}</span>\n                <span slot=\"meta\">${e.querySelectorAll('EnumVal').length}</span>\n              </mwc-list-item>`\n          )}\n        </mwc-select>`,\n        html`<wizard-textfield\n          label=\"id\"\n          helper=\"${translate('scl.id')}\"\n          .maybeValue=${''}\n          required\n          maxlength=\"127\"\n          minlength=\"1\"\n          pattern=\"${patterns.nmToken}\"\n          dialogInitialFocus\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"desc\"\n          helper=\"${translate('scl.desc')}\"\n          .maybeValue=${null}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n      ],\n    },\n  ];\n}\n\nexport function eNumTypeEditWizard(\n  eNumTypeIdentity: string,\n  doc: XMLDocument\n): Wizard | undefined {\n  const enumtype = doc.querySelector(selector('EnumType', eNumTypeIdentity));\n  if (!enumtype) return undefined;\n\n  return [\n    {\n      title: get('enum.wizard.title.edit'),\n      element: enumtype,\n      primary: {\n        icon: '',\n        label: get('save'),\n        action: updateIDNamingAction(enumtype),\n      },\n      content: [\n        html`<mwc-button\n          icon=\"delete\"\n          trailingIcon\n          label=\"${translate('remove')}\"\n          @click=${(e: MouseEvent) => {\n            e.target!.dispatchEvent(newWizardEvent());\n            e.target!.dispatchEvent(\n              newActionEvent({\n                old: {\n                  parent: enumtype.parentElement!,\n                  element: enumtype,\n                  reference: enumtype.nextSibling,\n                },\n              })\n            );\n          }}\n          fullwidth\n        ></mwc-button> `,\n        html`<wizard-textfield\n          label=\"id\"\n          helper=\"${translate('scl.id')}\"\n          .maybeValue=${enumtype.getAttribute('id')}\n          required\n          maxlength=\"127\"\n          minlength=\"1\"\n          pattern=\"${patterns.nmToken}\"\n          dialogInitialFocus\n        ></wizard-textfield>`,\n        html`<wizard-textfield\n          label=\"desc\"\n          helper=\"${translate('scl.desc')}\"\n          .maybeValue=${enumtype.getAttribute('desc')}\n          nullable\n          pattern=\"${patterns.normalizedString}\"\n        ></wizard-textfield>`,\n        html`<mwc-button\n            slot=\"graphic\"\n            icon=\"playlist_add\"\n            label=\"${translate('scl.EnumVal')}\"\n            @click=${(e: Event) => {\n              const wizard = eNumValWizard({\n                parent: enumtype,\n              });\n              if (wizard) e.target!.dispatchEvent(newWizardEvent(wizard));\n              e.target!.dispatchEvent(newWizardEvent());\n            }}\n          ></mwc-button>\n          <mwc-list\n            style=\"margin-top: 0px;\"\n            @selected=${(e: SingleSelectedEvent) => {\n              const wizard = eNumValWizard({\n                identity: (<ListItem>(<List>e.target).selected).value,\n                doc,\n              });\n              if (wizard) e.target!.dispatchEvent(newWizardEvent(wizard));\n              e.target!.dispatchEvent(newWizardEvent());\n            }}\n            >${Array.from(enumtype.querySelectorAll('EnumVal')).map(\n              enumval =>\n                html`<mwc-list-item\n                  graphic=\"icon\"\n                  hasMeta\n                  tabindex=\"0\"\n                  value=\"${identity(enumval)}\"\n                >\n                  <span>${enumval.textContent ?? ''}</span>\n                  <span slot=\"graphic\"\n                    >${enumval.getAttribute('ord') ?? '-1'}</span\n                  >\n                </mwc-list-item>`\n            )}</mwc-list\n          > `,\n      ],\n    },\n  ];\n}\n"]}