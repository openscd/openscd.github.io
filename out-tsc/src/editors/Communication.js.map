{"version":3,"file":"Communication.js","sourceRoot":"","sources":["../../../src/editors/Communication.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAkB,QAAQ,EAAE,GAAG,EAAE,MAAM,aAAa,CAAC;AAC9E,OAAO,EAAE,SAAS,EAAE,GAAG,EAAE,MAAM,eAAe,CAAC;AAE/C,OAAO,EACL,cAAc,EACd,cAAc,EACd,aAAa,EACb,YAAY,GACb,MAAM,kBAAkB,CAAC;AAE1B,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,+BAA+B,CAAC;AAElE,OAAO,sCAAsC,CAAC;AAC9C,OAAO,EAAE,gBAAgB,EAAE,MAAM,sCAAsC,CAAC;AAExE,sEAAsE;AACtE,MAAM,CAAC,OAAO,OAAO,mBAAoB,SAAQ,UAAU;IAKzD,mBAAmB;QACjB,IAAI,CAAC,aAAa,CAChB,cAAc,CAAC;YACb,GAAG,EAAE;gBACH,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,eAAe;gBAChC,OAAO,EAAE,aAAa,CAAC,IAAI,CAAC,GAAG,EAAE,eAAe,EAAE,EAAE,CAAC;gBACrD,SAAS,EAAE,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,eAAe,EAAE,eAAe,CAAC;aACnE;SACF,CAAC,CACH,CAAC;IACJ,CAAC;IAED,0EAA0E;IAC1E,0BAA0B;QACxB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,SAAS,CAAC,aAAa,CAAC;YAClD,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAE7B,IAAI,CAAC,aAAa,CAChB,cAAc,CACZ,gBAAgB,CAAC;YACf,MAAM,EAAE,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,eAAe,CAAE;SACjD,CAAC,CACH,CACF,CAAC;IACJ,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,aAAa,CAAC,SAAS,CAAC,UAAU,CAAC;YAChD,OAAO,IAAI,CAAA;;aAEJ,SAAS,CAAC,uBAAuB,CAAC;;;;mBAI5B,GAAG,CAAC,6BAA6B,CAAC;mBAClC,GAAG,EAAE,CAAC,IAAI,CAAC,0BAA0B,EAAE;;YAE9C,CAAC;QACT,OAAO,IAAI,CAAA;;;iBAGE,GAAG,CAAC,6BAA6B,CAAC;iBAClC,GAAG,EAAE,CAAC,IAAI,CAAC,0BAA0B,EAAE;;SAE/C,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC,GAAG,CACtE,UAAU,CAAC,EAAE,CACX,IAAI,CAAA,+BAA+B,UAAU,uBAAuB,CACvE,EAAE,CAAC;IACR,CAAC;;AAEM,0BAAM,GAAG,GAAG,CAAA;MACf,MAAM;;;;;;;;;;;GAWT,CAAC;AAhEF;IADC,QAAQ,EAAE;gDACO","sourcesContent":["import { LitElement, html, TemplateResult, property, css } from 'lit-element';\nimport { translate, get } from 'lit-translate';\n\nimport {\n  newWizardEvent,\n  newActionEvent,\n  createElement,\n  getReference,\n} from '../foundation.js';\n\nimport { selectors, styles } from './communication/foundation.js';\n\nimport './communication/subnetwork-editor.js';\nimport { subNetworkWizard } from './communication/subnetwork-editor.js';\n\n/** An editor [[`plugin`]] for editing the `Communication` section. */\nexport default class CommunicationPlugin extends LitElement {\n  /** The document being edited as provided to plugins by [[`OpenSCD`]]. */\n  @property()\n  doc!: XMLDocument;\n\n  createCommunication(): void {\n    this.dispatchEvent(\n      newActionEvent({\n        new: {\n          parent: this.doc.documentElement,\n          element: createElement(this.doc, 'Communication', {}),\n          reference: getReference(this.doc.documentElement, 'Communication'),\n        },\n      })\n    );\n  }\n\n  /** Opens a [[`WizardDialog`]] for creating a new `SubNetwork` element. */\n  openCreateSubNetworkWizard(): void {\n    if (!this.doc.querySelector(selectors.Communication))\n      this.createCommunication();\n\n    this.dispatchEvent(\n      newWizardEvent(\n        subNetworkWizard({\n          parent: this.doc.querySelector('Communication')!,\n        })\n      )\n    );\n  }\n\n  render(): TemplateResult {\n    if (!this.doc?.querySelector(selectors.SubNetwork))\n      return html`<h1>\n        <span style=\"color: var(--base1)\"\n          >${translate('communication.missing')}</span\n        ><mwc-fab\n          extended\n          icon=\"add\"\n          label=\"${get('subnetwork.wizard.title.add')}\"\n          @click=${() => this.openCreateSubNetworkWizard()}\n        ></mwc-fab>\n      </h1>`;\n    return html`<mwc-fab\n        extended\n        icon=\"add\"\n        label=\"${get('subnetwork.wizard.title.add')}\"\n        @click=${() => this.openCreateSubNetworkWizard()}\n      ></mwc-fab\n      >${Array.from(this.doc.querySelectorAll(selectors.SubNetwork) ?? []).map(\n        subnetwork =>\n          html`<subnetwork-editor .element=${subnetwork}></subnetwork-editor>`\n      )}`;\n  }\n\n  static styles = css`\n    ${styles}\n\n    mwc-fab {\n      position: fixed;\n      bottom: 32px;\n      right: 32px;\n    }\n\n    :host {\n      width: 100vw;\n    }\n  `;\n}\n"]}