{"version":3,"file":"Hosting.js","sourceRoot":"","sources":["../../src/Hosting.ts"],"names":[],"mappings":"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","sourcesContent":["import { Drawer } from '@material/mwc-drawer';\nimport { ActionDetail, List } from '@material/mwc-list';\nimport { ListItem } from '@material/mwc-list/mwc-list-item';\nimport { html, property, query, TemplateResult } from 'lit-element';\nimport { until } from 'lit-html/directives/until';\nimport { translate } from 'lit-translate';\nimport { Mixin, newPendingStateEvent } from './foundation.js';\nimport { LoggingElement } from './Logging.js';\nimport { Plugin, PluggingElement, pluginIcons } from './Plugging.js';\nimport { SettingElement } from './Setting.js';\n\ninterface MenuItem {\n  icon: string;\n  name: string;\n  hint?: string;\n  actionItem?: boolean;\n  action?: (event: CustomEvent<ActionDetail>) => void;\n  disabled?: () => boolean;\n  content?: () => Promise<TemplateResult>;\n  kind: string;\n}\n\ninterface Validator {\n  validate: () => Promise<void>;\n}\n\ninterface MenuPlugin {\n  run: () => Promise<void>;\n}\n\n/** Mixin that hosts the UI for Plugins, Settings and Logging */\nexport type HostingElement = Mixin<typeof Hosting>;\n\nexport function Hosting<\n  TBase extends new (...args: any[]) => PluggingElement &\n    LoggingElement &\n    SettingElement\n>(Base: TBase) {\n  class HostingElement extends Base {\n    /** The currently active editor tab. */\n    @property({ type: Number })\n    activeTab = 0;\n    @property({ attribute: false })\n    validated: Promise<void> = Promise.resolve();\n\n    private shouldValidate = false;\n\n    @query('#menu') menuUI!: Drawer;\n\n    get menu(): (MenuItem | 'divider')[] {\n      const topMenu: (MenuItem | 'divider')[] = [];\n      const middleMenu: (MenuItem | 'divider')[] = [];\n      const bottomMenu: (MenuItem | 'divider')[] = [];\n      const validators: (MenuItem | 'divider')[] = [];\n\n      this.topMenu.forEach(plugin =>\n        topMenu.push({\n          icon: plugin.icon || pluginIcons['menu'],\n          name: plugin.name,\n          action: ae => {\n            this.dispatchEvent(\n              newPendingStateEvent(\n                (<MenuPlugin>(\n                  (<unknown>(\n                    (<List>ae.target).items[ae.detail.index].lastElementChild\n                  ))\n                )).run()\n              )\n            );\n          },\n          disabled: (): boolean => plugin.requireDoc! && this.doc === null,\n          content: plugin.content,\n          kind: 'top',\n        })\n      );\n\n      this.middleMenu.forEach(plugin =>\n        middleMenu.push({\n          icon: plugin.icon || pluginIcons['menu'],\n          name: plugin.name,\n          action: ae => {\n            this.dispatchEvent(\n              newPendingStateEvent(\n                (<MenuPlugin>(\n                  (<unknown>(\n                    (<List>ae.target).items[ae.detail.index].lastElementChild\n                  ))\n                )).run()\n              )\n            );\n          },\n          disabled: (): boolean => plugin.requireDoc! && this.doc === null,\n          content: plugin.content,\n          kind: 'middle',\n        })\n      );\n\n      this.bottomMenu.forEach(plugin =>\n        bottomMenu.push({\n          icon: plugin.icon || pluginIcons['menu'],\n          name: plugin.name,\n          action: ae => {\n            this.dispatchEvent(\n              newPendingStateEvent(\n                (<MenuPlugin>(\n                  (<unknown>(\n                    (<List>ae.target).items[ae.detail.index].lastElementChild\n                  ))\n                )).run()\n              )\n            );\n          },\n          disabled: (): boolean => plugin.requireDoc! && this.doc === null,\n          content: plugin.content,\n          kind: 'middle',\n        })\n      );\n\n      this.validators.forEach(plugin =>\n        validators.push({\n          icon: plugin.icon || pluginIcons['validator'],\n          name: plugin.name,\n          action: ae => {\n            if (this.diagnoses.get(plugin.src))\n              this.diagnoses.get(plugin.src)!.length = 0;\n\n            this.dispatchEvent(\n              newPendingStateEvent(\n                (<Validator>(\n                  (<unknown>(\n                    (<List>ae.target).items[ae.detail.index].lastElementChild\n                  ))\n                )).validate()\n              )\n            );\n          },\n          disabled: (): boolean => this.doc === null,\n          content: plugin.content,\n          kind: 'validator',\n        })\n      );\n\n      if (middleMenu.length > 0) middleMenu.push('divider');\n      if (bottomMenu.length > 0) bottomMenu.push('divider');\n\n      return [\n        'divider',\n        ...topMenu,\n        'divider',\n        {\n          icon: 'undo',\n          name: 'undo',\n          actionItem: true,\n          action: this.undo,\n          disabled: (): boolean => !this.canUndo,\n          kind: 'static',\n        },\n        {\n          icon: 'redo',\n          name: 'redo',\n          actionItem: true,\n          action: this.redo,\n          disabled: (): boolean => !this.canRedo,\n          kind: 'static',\n        },\n        ...validators,\n        {\n          icon: 'history',\n          name: 'menu.viewLog',\n          actionItem: true,\n          action: (): void => this.logUI.show(),\n          kind: 'static',\n        },\n        {\n          icon: 'rule',\n          name: 'menu.viewDiag',\n          actionItem: true,\n          action: (): void => this.diagnosticUI.show(),\n          kind: 'static',\n        },\n        'divider',\n        ...middleMenu,\n        {\n          icon: 'settings',\n          name: 'settings.title',\n          action: (): void => this.settingsUI.show(),\n          kind: 'static',\n        },\n        ...bottomMenu,\n        {\n          icon: 'extension',\n          name: 'plugins.heading',\n          action: (): void => this.pluginUI.show(),\n          kind: 'static',\n        },\n      ];\n    }\n\n    constructor(...args: any[]) {\n      super(...args);\n\n      this.addEventListener('validate', async () => {\n        this.shouldValidate = true;\n        await this.validated;\n\n        if (!this.shouldValidate) return;\n\n        this.diagnoses.clear();\n        this.shouldValidate = false;\n\n        this.validated = Promise.allSettled(\n          this.menuUI\n            .querySelector('mwc-list')!\n            .items.filter(item => item.className === 'validator')\n            .map(item =>\n              (<Validator>(<unknown>item.lastElementChild)).validate()\n            )\n        ).then();\n        this.dispatchEvent(newPendingStateEvent(this.validated));\n      });\n    }\n\n    renderMenuItem(me: MenuItem | 'divider'): TemplateResult {\n      if (me === 'divider')\n        return html`<li divider padded role=\"separator\"></li>`;\n      return html`\n        <mwc-list-item\n          class=\"${me.kind}\"\n          iconid=\"${me.icon}\"\n          graphic=\"icon\"\n          .disabled=${me.disabled?.() || !me.action}\n          ><mwc-icon slot=\"graphic\">${me.icon}</mwc-icon>\n          <span>${translate(me.name)}</span>\n          ${me.hint\n            ? html`<span slot=\"secondary\"><tt>${me.hint}</tt></span>`\n            : ''}\n          ${me.content\n            ? until(\n                me.content(),\n                html`<mwc-linear-progress indeterminate></mwc-linear-progress>`\n              )\n            : ''}\n        </mwc-list-item>\n      `;\n    }\n\n    renderActionItem(me: MenuItem | 'divider'): TemplateResult {\n      if (me !== 'divider' && me.actionItem)\n        return html`<mwc-icon-button\n          slot=\"actionItems\"\n          icon=\"${me.icon}\"\n          label=\"${me.name}\"\n          ?disabled=${me.disabled?.() || !me.action}\n          @click=${me.action}\n        ></mwc-icon-button>`;\n      else return html``;\n    }\n\n    renderEditorTab({ name, icon }: Plugin): TemplateResult {\n      return html`<mwc-tab label=${translate(name)} icon=${icon || 'edit'}>\n      </mwc-tab>`;\n    }\n\n    render(): TemplateResult {\n      return html` <mwc-drawer\n          class=\"mdc-theme--surface\"\n          hasheader\n          type=\"modal\"\n          id=\"menu\"\n        >\n          <span slot=\"title\">${translate('menu.title')}</span>\n          ${this.docName\n            ? html`<span slot=\"subtitle\">${this.docName}</span>`\n            : ''}\n          <mwc-list\n            wrapFocus\n            @action=${(ae: CustomEvent<ActionDetail>) =>\n              (<MenuItem>(\n                this.menu.filter(item => item !== 'divider')[ae.detail.index]\n              ))?.action?.(ae)}\n          >\n            ${this.menu.map(this.renderMenuItem)}\n          </mwc-list>\n\n          <mwc-top-app-bar-fixed slot=\"appContent\">\n            <mwc-icon-button\n              icon=\"menu\"\n              label=\"Menu\"\n              slot=\"navigationIcon\"\n              @click=${() => (this.menuUI.open = true)}\n            ></mwc-icon-button>\n            <div slot=\"title\" id=\"title\">${this.docName}</div>\n            ${this.menu.map(this.renderActionItem)}\n            ${this.doc\n              ? html`<mwc-tab-bar\n                  @MDCTabBar:activated=${(e: CustomEvent) =>\n                    (this.activeTab = e.detail.index)}\n                >\n                  ${this.editors.map(this.renderEditorTab)}\n                </mwc-tab-bar>`\n              : ``}\n          </mwc-top-app-bar-fixed>\n        </mwc-drawer>\n\n        ${this.doc\n          ? until(\n              this.editors[this.activeTab] &&\n                this.editors[this.activeTab].content(),\n              html`<mwc-linear-progress indeterminate></mwc-linear-progress>`\n            )\n          : html`<div class=\"landing\">\n              ${(<MenuItem[]>this.menu.filter(mi => mi !== 'divider')).map(\n                (mi: MenuItem, index) =>\n                  mi.kind === 'top' && !mi.disabled?.()\n                    ? html`\n                        <mwc-icon-button\n                          class=\"landing_icon\"\n                          icon=\"${mi.icon}\"\n                          @click=\"${() =>\n                            (<ListItem>(\n                              this.menuUI.querySelector('mwc-list')!.items[\n                                index\n                              ]\n                            )).click()}\"\n                        >\n                          <div class=\"landing_label\">${mi.name}</div>\n                        </mwc-icon-button>\n                      `\n                    : html``\n              )}\n            </div>`}\n        ${super.render()}`;\n    }\n  }\n  return HostingElement;\n}\n"]}